<header>
    <p-button icon="pi pi-arrow-left" (onClick)="voltar()" />
    <h1>Agendamentos</h1>
    <div class="buttons-text">
        <p-button label="Cadastrar cliente" (onClick)="cadastrarCliente()" size="small" />
    </div>
</header>

<div class="container">
    <p-table class="tabela" id="tabela" [scrollable]="true" scrollHeight="800px" [value]="usuarios"
        [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
            <tr>
                <th>Nome</th>
                <th>Criado em</th>
                <th>E-mail</th>
                <th>Função</th>
                <th>Nascimento</th>
                <th>CPF</th>
                <th>Ocupação profissional</th>
                <th>Tipo de cadastro</th>
                <th>Telefone</th>

                <th style="text-align: end">Opções</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-usuarioRep>
            <tr>
                <td class="no-wrap">
                    <p-button [label]="usuarioRep.usuario.nome" [outlined]="true" [style]="{fontSize: '14px', padding: '6px'}"
                        pTooltip="Clique para detalhes do cliente" [rounded]="true" (onClick)="verUsuario(usuarioRep.usuario.objectId)"  />
                </td>
                <td class="no-wrap">
                    {{
                    usuarioRep.usuario.createdAt | date : "dd/MM/yyyy - HH:mm"
                    }}
                </td>
                <td>{{ usuarioRep.usuario.email }}</td>

                <td>
                    <p-tag [value]="usuarioRep.usuario.funcao" 
                        pTooltip="Clique para ajutar função" [severity]="getStatusFuncaoSeverity(usuarioRep.usuario.funcao)" />
                </td>


                <td>{{ usuarioRep?.usuario?.nasc ?? '-' }}</td>
                <td class="no-wrap">{{ usuarioRep?.usuario?.cpf ?? '-' }}</td>
                <td>{{ usuarioRep?.usuario?.ocupacaoProfissional ?? '-' }}</td>
                <td>{{ usuarioRep.usuario.preCadastro ? 'Cadastrado parcialmente': 'Cadastro completo' }}</td>
                <td class="no-wrap">{{ usuarioRep?.usuario?.telefone ?? '-' }}</td>


                <td style="text-align: end">
                    <button type="button" pButton pRipple [outlined]="true" severity="warning" icon="pi pi-ellipsis-v"
                        (click)="showDialogOpcoes(usuarioRep)"></button>
                </td>
            </tr>
        </ng-template>
    </p-table>

</div>

<app-card-novo-usuario [visibilidadeNovoCliente]="visibilidadeNovoCliente" (emitirVisibilidade)="fecharModal($event)" />